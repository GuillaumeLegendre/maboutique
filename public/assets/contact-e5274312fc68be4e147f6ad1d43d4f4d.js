(function(){$(document).ready(function(){var e;return $(".summernote").summernote({height:300,minHeight:300,maximumImageFileSize:5e5,onImageUpload:function(t,a,n){e(t[0],a,n)}}),e=function(e,t,a){var n;n=new FormData,n.append("file",e),$.ajax({data:n,type:"POST",url:"/contact/upload_img",cache:!1,contentType:!1,processData:!1,success:function(e){t.insertImage(a,window.location.origin+e)}})},$("select").change(function(){return $.ajax({url:"/contact/preview_number_send_sms",type:"GET",data:{vip:$("#select_vip").val(),gender:$("#select_gender").val()},contentType:"application/json; charset=utf-8",success:function(e){$("#preview_number_send").text(e)}})}),$("#save-template").click(function(){return $(".summernote").code()&&$("#subject").val()?$.ajax({url:"/contact/save_template",type:"POST",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{template:{subject:$("#subject").val(),body:$(".summernote").code()}},success:function(){alert("Votre template a \xe9t\xe9 sauvegard\xe9.")}}):alert("Vous devez compl\xe9ter le sujet et le corps de l'email pour pouvoir le sauvegarder en tant que template.")}),$("#edit-template").click(function(){return $(".summernote").code()&&$("#subject").val()?($(".modal#confirm_edit").modal(),$("#subject_template").text($("#select-template option:selected").text())):alert("Vous devez compl\xe9ter le sujet et le corps de l'email pour pouvoir le sauvegarder en tant que template.")}),$("#valid-edit-template").click(function(){return $.ajax({url:"/contact/edit_template",type:"POST",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{template:{subject:$("#subject").val(),body:$(".summernote").code()},template_id:$("#select-template").val()},success:function(e){$(".modal#confirm_edit").modal("hide"),$("#preview_number_send").text(e)}})}),$("#load-template").click(function(){return window.location.href="/contact/new_email?template="+$("#select-template").val()})})}).call(this);